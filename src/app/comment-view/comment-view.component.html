
<mat-menu #pointItemMenu="matMenu">
    <button mat-menu-item (click)="reportMessage(menuMessage)">Report</button>
    <button mat-menu-item>Help</button>
</mat-menu>
<div class="message-container">
    <div class="message" *ngFor="let message of messages">
        <div class="message-content">
            <div class="user">
                <div class="avatar" [style.background-image]="avatarForUser(message.user)"></div>
                <label class="display-name">{{message.user.displayName}}</label>
                <label class="username">@{{message.user.username}}</label>

                <button mat-icon-button [matMenuTriggerFor]="pointItemMenu" (click)="menuMessage = message">
                    <mat-icon [inline]="true">more_vert</mat-icon>
                </button>
            </div>
            <div class="content" (click)="selectMessage(message)">
                {{message.message}}
            </div>
            
            <div class="actions">
                <div class="spacer"></div>
                <div class="counted-action">
                    <div class="count-indicator">
                        {{message.submessages?.length || 0}}
                    </div>
                    <button mat-icon-button matTooltip="Comment" matTooltipPosition="below" (click)="selectMessage(message)">
                        <mat-icon [inline]="true">comment</mat-icon>
                    </button>
                </div>
                <div class="counted-action">
                    <div class="count-indicator">  
                        {{message.upvotes}}
                    </div>
                    <button mat-icon-button matTooltip="Upvote" matTooltipPosition="below" (click)="upvoteMessage(message)">
                        <mat-icon [inline]="true">thumb_up</mat-icon>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <ng-content></ng-content>
</div>